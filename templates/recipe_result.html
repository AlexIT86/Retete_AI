{% extends "base.html" %}

{% block title %}{{ recipe.title }} - Recipe AI Generator{% endblock %}

{% block content %}
<div class="text-center mb-4">
    <a href="{{ url_for('index') }}" class="btn btn-outline-primary mb-3">
        <i class="fas fa-arrow-left"></i> Înapoi la Generator
    </a>
</div>

<!-- Titlul rețetei -->
<div class="text-center mb-5">
    <h1 class="display-5 mb-3">
        <i class="fas fa-utensils"></i> {{ recipe.title }}
    </h1>
    
    <!-- Meta informații: Porții și timpi -->
    <div class="d-flex flex-wrap justify-content-center gap-3 mb-3">
        {% if recipe.servings %}
        <div class="badge bg-primary rounded-pill p-3">
            <i class="fas fa-users me-2"></i> {{ recipe.servings }} porții
        </div>
        {% endif %}
        {% if recipe.prep_time_minutes %}
        <div class="badge bg-secondary rounded-pill p-3">
            <i class="fas fa-kitchen-set me-2"></i> Pregătire: {{ recipe.prep_time_minutes }} min
        </div>
        {% endif %}
        {% if recipe.cook_time_minutes %}
        <div class="badge bg-warning text-dark rounded-pill p-3">
            <i class="fas fa-fire me-2"></i> Gătire: {{ recipe.cook_time_minutes }} min
        </div>
        {% endif %}
        {% if recipe.total_time_minutes %}
        <div class="badge bg-success rounded-pill p-3">
            <i class="fas fa-hourglass-half me-2"></i> Total: {{ recipe.total_time_minutes }} min
        </div>
        {% endif %}
    </div>
    
    <!-- Rating dificultate -->
    <div class="mb-3">
        <span class="me-2">Dificultate:</span>
        <span class="stars">
            {% for i in range(1, 6) %}
                {% if i <= recipe.difficulty %}
                    <i class="fas fa-star"></i>
                {% else %}
                    <i class="far fa-star"></i>
                {% endif %}
            {% endfor %}
        </span>
        <span class="ms-2 text-muted">({{ recipe.difficulty }}/5)</span>
    </div>
    
    <!-- Ingrediente originale -->
    <div class="alert alert-info">
        <i class="fas fa-info-circle"></i>
        <strong>Ingrediente folosite:</strong> {{ original_ingredients }}
    </div>
</div>

<div class="row">
    <!-- Coloana ingrediente -->
    <div class="col-lg-6 mb-4">
        <div class="ingredients-list">
            <h3>
                <i class="fas fa-list-check"></i> Ingrediente Necesare
            </h3>
            <ul class="list-unstyled mt-3">
                {% for ingredient in recipe.ingredients %}
                    <li class="mb-2">
                        <i class="fas fa-check-circle me-2"></i>
                        {{ ingredient }}
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    
    <!-- Coloana instrucțiuni -->
    <div class="col-lg-6 mb-4">
        <div class="instructions-list">
            <h3>
                <i class="fas fa-tasks"></i> Mod de Preparare
            </h3>
            <ol class="mt-3">
                {% for instruction in recipe.instructions %}
                    <li class="mb-3">{{ instruction }}</li>
                {% endfor %}
            </ol>
        </div>
    </div>
</div>

<!-- Recomandări băuturi -->
<div class="row mt-4">
    <div class="col-12">
        <div class="wine-pairing">
            <h3>
                <i class="fas fa-wine-glass-alt"></i> Recomandare Băutură
            </h3>
            <p class="mb-0 mt-2">
                <i class="fas fa-quote-left"></i>
                {{ recipe.wine_pairing }}
                <i class="fas fa-quote-right"></i>
            </p>
        </div>
    </div>
</div>

<!-- Butoane de acțiune -->
<div class="row mt-5">
    <div class="col-12 text-center">
        <button class="btn btn-success btn-lg me-3" id="saveRecipeBtn">
            <i class="fas fa-save"></i> Salvează în Galerie
        </button>
        
        <button class="btn btn-outline-primary btn-lg me-3" id="shareRecipeBtn">
            <i class="fas fa-share-alt"></i> Partajează Rețeta
        </button>
        
        <a href="{{ url_for('index') }}" class="btn btn-outline-secondary btn-lg">
            <i class="fas fa-plus"></i> Generează Alta
        </a>
    </div>
</div>

<!-- Modal pentru confirmare salvare -->
<div class="modal fade" id="saveModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-save"></i> Salvare Rețetă
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center" id="modalBody">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="mt-2">Salvez rețeta...</p>
            </div>
            <div class="modal-footer" id="modalFooter" style="display: none;">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Închide</button>
                <a href="{{ url_for('gallery') }}" class="btn btn-primary">Vezi Galeria</a>
            </div>
        </div>
    </div>
</div>

<!-- Modal pentru partajare -->
<div class="modal fade" id="shareModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="fas fa-share-alt"></i> Partajează Rețeta
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <p>Partajează această rețetă delicioasă cu prietenii:</p>
                <div class="d-grid gap-2">
                    <button class="btn btn-primary share-platform" data-platform="facebook">
                        <i class="fab fa-facebook-f"></i> Partajează pe Facebook
                    </button>
                    <button class="btn btn-info share-platform" data-platform="twitter">
                        <i class="fab fa-twitter"></i> Partajează pe Twitter
                    </button>
                    <button class="btn btn-success share-platform" data-platform="whatsapp">
                        <i class="fab fa-whatsapp"></i> Trimite pe WhatsApp
                    </button>
                    <button class="btn btn-outline-secondary" id="copyTextBtn">
                        <i class="fas fa-copy"></i> Copiază Textul
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_css %}
<style>
    .recipe-card {
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 2rem;
        margin-bottom: 2rem;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .stars {
        animation: starGlow 2s ease-in-out infinite alternate;
    }
    
    @keyframes starGlow {
        from {
            filter: drop-shadow(0 0 5px #ffc107);
        }
        to {
            filter: drop-shadow(0 0 10px #ffc107);
        }
    }
    
    .ingredients-list, .instructions-list {
        animation: slideInLeft 0.6s ease-out;
    }
    
    .wine-pairing {
        animation: slideInUp 0.8s ease-out;
    }
    
    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-50px);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
    
    @keyframes slideInUp {
        from {
            opacity: 0;
            transform: translateY(50px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .btn-lg {
        padding: 12px 25px;
        margin: 5px;
    }
</style>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/recipe_result.js') }}"></script>
{% endblock %}